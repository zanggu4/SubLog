# Subscription Ledger - 기능 명세서

## 서비스 개요

GitHub 커밋 기반 구독 가계부 웹앱. 사용자의 GitHub 저장소에 구독 데이터를 JSON으로 저장하고, 모든 변경(추가/수정/해지)을 커밋 히스토리로 기록한다. 데이터베이스 없이 GitHub 자체가 저장소 역할.

- **핵심 컨셉**: 구독 추가 = commit, 가격 변경 = diff, 해지 = commit log
- **타겟 사용자**: 개발자, 구독 서비스를 체계적으로 관리하고 싶은 사람
- **톤**: 개발자 친화적, 깔끔하고 모던한 느낌

---

## 페이지 & 기능

### 1. 랜딩 페이지 (`/`)

서비스 소개 + 로그인 유도.

- 서비스 이름: "Subscription Ledger"
- 한 줄 설명: "구독 서비스를 GitHub 커밋으로 관리하세요."
- 부가 설명: "구독 추가 = commit, 가격 변경 = diff, 해지 = commit log"
- CTA 버튼: "GitHub로 시작하기" → 로그인 페이지로 이동

---

### 2. 로그인 페이지 (`/login`)

GitHub OAuth 로그인.

- "GitHub로 로그인" 버튼 하나
- 이미 로그인 상태면 대시보드로 자동 이동

---

### 3. 대시보드 (`/dashboard`)

로그인 후 메인 화면. 모든 기능이 이 페이지에 모여 있음.

#### 3-1. 헤더

- 좌측: 앱 이름 "Subscription Ledger"
- 우측: GitHub username 표시 + 로그아웃 버튼

#### 3-2. 요약 통계

구독 현황을 한눈에 보여주는 카드 3개:

| 항목 | 설명 |
|------|------|
| 활성 구독 | 현재 활성 상태인 구독 수 (예: "3개") |
| 월 예상 비용 | 모든 활성 구독의 월간 환산 총액 (연간 구독은 ÷12) |
| 연 예상 비용 | 모든 활성 구독의 연간 환산 총액 (월간 구독은 ×12) |

#### 3-3. 구독 추가

- "구독 추가" 버튼 클릭 시 폼이 나타남
- 입력 필드:
  - 서비스명 (텍스트, 필수) — 예: "Netflix"
  - 금액 (숫자, 필수, 원 단위) — 예: 17000
  - 결제 주기 (선택: 월간 / 연간)
  - 결제일 (숫자, 1~31) — 예: 15
- 추가 완료 시 토스트 알림: "Netflix 구독 추가 완료. 커밋 생성됨."
- GitHub 저장소에 `feat: add Netflix subscription` 커밋이 생성됨

#### 3-4. 구독 목록

활성 구독이 먼저, 해지된 구독이 아래에 표시.

각 구독 카드에 표시되는 정보:
- 서비스명
- 상태 배지 (활성 / 해지됨)
- 금액 + 주기 (예: "17,000원 / 월")
- 결제일 (예: "매월 12일 결제")
- 해지 버튼 (활성 구독만)

**해지 플로우:**
1. 해지 버튼 클릭
2. 확인 다이얼로그: "{서비스명} 구독을 해지하시겠습니까? GitHub에 해지 커밋이 생성됩니다."
3. 확인 시 → 상태가 "cancelled"로 변경, 토스트 알림
4. GitHub에 `chore: cancel Netflix subscription` 커밋 생성

해지된 구독은 반투명하게 표시되고 해지 버튼 없음.

#### 3-5. 커밋 히스토리

GitHub 저장소의 `subscriptions.json` 파일 관련 커밋 목록.

각 커밋에 표시되는 정보:
- 커밋 메시지 (모노스페이스) — 클릭 시 GitHub 커밋 페이지 새 탭 오픈
- 커밋 SHA 앞 7자리
- 날짜

페이지네이션: 이전/다음 버튼 (20개씩)

---

## 데이터 구조

하나의 구독 항목:

```json
{
  "id": "netflix",
  "name": "Netflix",
  "price": 17000,
  "cycle": "monthly",
  "billing_day": 12,
  "status": "active"
}
```

- `id`: 서비스명에서 자동 생성 (소문자, 특수문자→하이픈)
- `cycle`: "monthly" 또는 "yearly"
- `status`: "active" 또는 "cancelled"

---

## 커밋 메시지 규칙

| 액션 | 메시지 형식 | 예시 |
|------|------------|------|
| 추가 | `feat: add {name} subscription` | `feat: add Netflix subscription` |
| 수정 | `chore: update {name} subscription` | `chore: update Spotify subscription` |
| 해지 | `chore: cancel {name} subscription` | `chore: cancel Wavve subscription` |

---

## 상태별 화면

| 상태 | 표시 내용 |
|------|----------|
| 로딩 중 | 스켈레톤 애니메이션 (카드 형태 placeholder) |
| 구독 없음 | "아직 등록된 구독이 없습니다." + 추가 버튼 안내 |
| 에러 | "문제가 발생했습니다" + 에러 메시지 + 다시 시도 버튼 |

---

## 반응형

- 모바일: 요약 통계 카드 세로 1열, 폼 전체 너비
- 데스크톱: 요약 통계 카드 가로 3열, 폼 2열 그리드
- 최대 너비 1024px 중앙 정렬
